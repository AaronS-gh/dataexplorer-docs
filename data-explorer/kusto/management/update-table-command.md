---
title:  .update table command
description: Learn how to use the .update table command to perform transactional data updates.
ms.reviewer: orspodek
ms.topic: reference
ms.date: 01/25/2024
---
# Update table

The `.update table` command performs  data updates in a specified table by deleting and appending data atomically.

## Permissions

You must have at least [Table Ingestor](../access-control/role-based-access-control.md) permissions to run this command.

## Syntax

The update commands has two syntaxes:

* The simple syntax assumes each row can be identified by an *Id* column.  Existing rows having ids found in the *append query* is deleted:
  
  `.update` `table` *TableName* on *IdColumnName* [`with` `(` *propertyName* `=` *propertyValue* [`,` ...]`)`] `<|`
  
  *appendQuery*
* The complete syntax offers more flexibility as you can define a query to delete rows and a different query to append rows:

  `.update` `table` *TableName* `delete` *DeleteIdentifier* `append` *AppendIdentifier* [`with` `(` *propertyName* `=` *propertyValue* [`,` ...]`)`] `<|`

  `let` *DeleteIdentifier*`=` ...`;`

  `let` *AppendIdentifier*`=` ...`;`

## Parameters

Name|Type|Required|Description
|--|--|--|--
*TableName*|string|&check;|The name of the table to update. The table name is always relative to the database in context.
*IdColumnName*|string|&check;|The name of the column identifying rows.  The column must be present in both the table and *appendQuery*.
*appendQuery*|string|&check;|The text of a query or a management command whose results are used as data to append.
*DeleteIdentifier*|string|&check;|The identifier name used to specify the delete predicate applied to the updated table.
*AppendIdentifier*|string|&check;|The identifier name used to specify the append predicate applied to the updated table.

## Supported properties

Name|Type|Description
|--|--|--
*whatif*|bool|If `true`, returns the number of records that will be appended / deleted in every shard, without actually appending / deleting any records. The default is `false`.

## Returns

The result of the command is a table with as many records
as there are data shards ("extents") generated by the command and deleted by the command.


|Name       |Type      |Description                                                                |
|-----------|----------|---------------------------------------------------------------------------|
|Table   |`guid`    |The table in which the extent was generated or deleted.|
|Action |`string`  |"Create" or "Delete" depending on the action performed on the extent.|
|ExtentId   |`guid`    |The unique identifier for the data shard that was generated or deleted by the command.|
|RowCount   |`long`    |The number of rows generated or deleted in the specified extent by the command.|

>[!NOTE]
> When you update a table that is the source for an update policy, the result of the command contains all generated results in all tables.

## Limitations

- This command cannot be performed on tables which are the source tables to continuous exports and materialized views.
- This command does not support deleting more than 5 million records.
- The predicates for this command must meet the following requirements:
    - Delete predicate must include at least one `where` operator.
    - Delete predicate can only use the following operators: `extend`, `where` and `project`.
    - No remote entities, cross-db and cross-cluster entities can be referenced by both the delete and append predicates.
    - The predicates cannot reference other tables, nor external tables and the `externaldata` operator.
- The delete predicate is expected to produce deterministic results and failing to do so can result in unexpected results.

## Example

The following example demonstrates how to update all records for a given user:
```
.update table T delete D append A <|
let D = T | where UserId == 'X';
let A = D | extend UserData = 'updated data';
```
