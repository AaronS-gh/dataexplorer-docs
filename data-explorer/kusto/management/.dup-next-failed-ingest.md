---
title: .dup-next-failed-ingest - Azure Data Explorer
description: Learn how to troubleshoot your data ingestion on demand using the .dup-next-failed-ingest command.
ms.topic: reference
ms.date: 12/01/2022
---

# .dup-next-failed-ingest

Use the `.dup-next-failed-ingest` command for on-demand troubleshooting of your data ingestion pull flow.

`.dup-next-failed-ingest` will watch the following ingestion for an ingestion failure. If the ingestion fails, the successfully downloaded ingestion source file(s) and a file containing metadata on the ingestion request will be uploaded to the specified storage container. Run the command before each ingestion you wish to watch, since it will only watch the very next ingestion.

The file uploads to the storage container and the ingestion are performed by the same node. If there are admin node changes between running the command and the next ingestion, you'll need to rerun the command since the duplication configuration isn't persisted.

> [!NOTE]
>
> * This command run in the context of a specific database
> * Azure blob containers are the only storage containers currently supported

## Permissions

This command requires [database admin](access-control/role-based-authorization.md) permissions.

## Syntax

`.dup-next-failed-ingest` `into` *TableName* `to` *StorageContainerPath*

## Parameters

|Name|Type|Required|Description|
|--|--|--|--|
|*TableName* | string | &check; | The name of the table from which the next ingestion will be duplicated.|
|*StorageContainerPath*| string | &check; | The path to the blob container that will store the duplication. We recommend prefacing the path with "h@" to hide sensitive information. To learn more, see [obfuscated string literals](../query/scalar-data-types/string.md#obfuscated-string-literals)|

## Returns

The provided *TableName* and *StorageContainerPath* will be returned along with an *IngestionCommandFilePath*, which is the location of the ingestion file request within the blob container.

Upon the next pull data ingestion, the ingestion source file(s) and another file containing metadata will be uploaded to the blob container.

## Example

```kusto
.dup-next-failed-ingest into PerfCounter to h@'https://kustorenginsomecluster.blob.core.windows.net/ingestion-duplication-perf-counter;storagekey...==
```

|TableName|StorageContainerPath|IngestionCommandFilePath|
|--|--|--|
|PerfCounter|https://kustorenginsomecluster.blob.core.windows.net/ingestion-duplication-perf-counter|ingestionrequest-KustoEH-PerfCounter-083736db-8cf7-4166-85fd-74ef54e491d1|
