---
title:  Plotly visualization
description: This article describes how to visualize data using the Plotly graphics library in Azure Data Explorer.
ms.reviewer: adieldar
ms.topic: reference
ms.date: 08/13/2023
zone_pivot_group_filename: data-explorer/zone-pivot-groups.json
zone_pivot_groups: kql-flavors-all
---
# Plotly (preview)

::: zone pivot="azuredataexplorer"

The Plotly graphics library supports ~80 chart types including basic charts, scientific, statistical, financial, maps, 3D, animations and more. To render a Plotly visual in KQL, the query must generate a table with a single string cell containing [Plotly JSON](https://plotly.com/chart-studio-help/json-chart-schema/). This Plotly JSON string can be generated by one of the following two methods:

* **Write your own Plotly visualization in Python**
    * In this method, you dynamically create the string in Python using the [Plotly package](https://plotly.com/python/getting-started/). This process requires use of the [python() plugin](pythonplugin.md).
    * The Python script is run on the existing ADX nodes using the inline python() plugin. It generates a Plotly JSON that is rendered by the client application.

| Pros | Cons |
| --- | ---|
| All types of Plotly visualizations are supported. | Requires enabling the python() plugin on ADX cluster.
| Full customization tailored to the specific scenarios. | To create the visualization the user needs to know the Python language and Plotly API.
| As the script runs on the server side, it can efficiently process big amounts of data to create the visualization. |
 
* **Use a pre-prepared Plotly template**
    * In this method a pre-prepared Plotly JSON for specific visualization can be reused by replacing the data objects with the required data to be rendered. The templates can be stored in a standard ADX table, and the data replacement logic can be packed in a stored function.
    * The supported templates are: [plotly_anomaly_fl()](../functions-library/plotly-anomaly-fl.md) and [plotly_scatter3d_fl()](../functions-library/plotly-scatter3d-fl.md)

| Pros | Cons |
| --- | ---|
| Supported on all ADX clusters  | Limited set of visualization types are supported with minimal customization is supported (limited to the template parameters).
| No need for Python programming. | Creating additional templates is complex.

## Example

The following KQL query uses inline Python to create the 3D scatter chart:

~~~kusto
OccupancyDetection
| project Temperature, Humidity, CO2, Occupancy
| where rand() < 0.1
| evaluate python(typeof(plotly:string),
```if 1:
    import plotly.express as px
    fig = px.scatter_3d(df, x='Temperature', y='Humidity', z='CO2', color='Occupancy')
    fig.update_layout(title=dict(text="Occupancy detection, plotly 5.11.0"))
    plotly_obj = fig.to_json()
    result = pd.DataFrame(data = [plotly_obj], columns = ["plotly"])
```)
~~~

:::image type="content" source="../../media/dashboard-customize-visuals/plotly-scatter3d.png" alt-text="Screenshot of plotly visual type.":::

> [!NOTE]
> For best performance, make sure that the python plugin image contains the latest versions of both the Python engine (currently 3.10.8) and Plotly package (currently 5.11.0). These versions can be checked with the [get_packages_version_fl()](../functions-library/get-packages-version-fl.md) function. To upgrade the Python image see [Change the Python language extensions image on your cluster](../../language-extensions.md#change-the-python-language-extensions-image-on-your-cluster).
Plotly visuals are useful for advanced charting including geographic, scientific, machine learning, 3d, animation and many other chart types. For more information, see [Plotly](https://plotly.com/python/).

::: zone-end

::: zone pivot="azuremonitor, fabric"

This visualization isn't supported.

::: zone-end
